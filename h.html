<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ููุตุฉ ุฏุฑูุณ ุงูุฑูุงุถูุงุช</title>
  
  <style>
    :root {
      --blue: #1e6ed8; 
      --yellow: #f2b400; 
      --card: #fff; 
      --muted: #9aa6b2; 
      --light-bg: #eef3fa; 
      --option-bg: #f7f9fc;
    }
    
    * {
      box-sizing: border-box;
      /* ุงุณุชุฎุฏุงู ุฎุทูุท ุจุณูุทุฉ ููุงุถุญุฉ */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    }
    
    body {
      margin: 0;
      background: var(--light-bg);
      color: #083243;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 0;
    }
    
    .app {
      width: 100%;
      max-width: 420px; 
      background: var(--card); 
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Global Card Style */
    .card {
      background: var(--card);
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(2,36,84,0.06);
      padding: 16px;
      margin: 16px;
    }

    /* Header Styling */
    header {
      padding: 16px;
      padding-bottom: 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .header-title {
      font-size: 20px;
      font-weight: bold;
      margin: 0;
      flex-grow: 1;
    }

    .back {
      color: var(--blue);
      font-weight: 600;
      cursor: pointer;
      font-size: 24px;
      line-height: 1;
      display: none; 
    }

    /* Lesson List & Detail Views */
    .lesson-list, .lesson-detail {
      flex-grow: 1;
      padding: 0 16px 80px 16px;
    }

    .lesson-item {
      background: var(--card);
      border: 1px solid #e6eef8;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .lesson-item:hover {
      background: #f7f9fc;
    }
    
    /* --- Whiteboard Style for Lesson Content --- */
    .whiteboard {
        margin-bottom: 20px;
        padding: 20px; 
        border-radius: 6px; 
        background: #ffffff; /* ุฎูููุฉ ุจูุถุงุก ูููุฉ ููุณุจูุฑุฉ */
        border: 2px solid #e0e0e0; /* ุญุงูุฉ ุจุณูุทุฉ */
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }

    .lesson-title {
        font-weight: bold;
        font-size: 20px;
        color: var(--blue);
        text-align: center;
        margin-bottom: 20px;
    }
    
    /* ุชูุณูู ุนูุงููู ุงูุฃูุณุงู ูุซู ููุญุฉ ุงูุดุฑุญ */
    .lesson-section-board {
        color: #000; /* ููู ุงูุนููุงู */
        font-weight: 900; 
        font-size: 17px;
        margin-top: 25px;
        margin-bottom: 10px;
        border-bottom: 3px solid var(--blue); /* ุฎุท ูุงุตู ุฃุฒุฑู */
        padding-bottom: 5px;
        text-align: right;
    }
    
    /* ุชูุณูู ุงููุต ููููู ุจุงุฑุฒุงู ููุงุถุญุงู ูุงููุชุงุจุฉ ุนูู ุณุจูุฑุฉ */
    .board-text {
        padding: 10px 0;
        line-height: 1.8;
        font-size: 16px;
        font-weight: 600; /* ุฌุนู ุงููุตูุต ุฃูุซุฑ ูุถูุญุงู */
        color: #1a1a1a;
        white-space: pre-wrap; /* ููุญูุงุธ ุนูู ุชูุณูู ุงูุฃุณุทุฑ ุฅุฐุง ุฃุฑุฏุช */
    }
    
    .example-text {
        /* ุงููุต ูููู ุจููุณ ุชูุณูู ุงูุณุจูุฑุฉ board-text */
        font-weight: bold; 
        font-style: normal;
        color: #083243;
    }
    /* --- ููุงูุฉ ุชูุณูู ุงูุณุจูุฑุฉ --- */

    /* Buttons */
    .start-btn {
      display: block;
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 0;
      background: var(--blue);
      color: #fff;
      font-weight: 700;
      margin-top: 15px;
      cursor: pointer;
    }
    
    /* Quiz Styling remains similar to the image you provided */
    .quiz-wrap { margin-top: 12px; }
    .question { font-size: 18px; margin-bottom: 12px; font-weight: 600; }
    .options { display: flex; flex-direction: column; gap: 8px; }
    .option {
      background: var(--option-bg);
      border-radius: 8px;
      padding: 12px;
      border: 1px solid transparent;
      cursor: pointer;
    }
    .option.selected { 
      background: #e6f0ff; 
      border-color: var(--blue);
    }
    .option.correct {
      background: #e6fbef;
      border-color: #8de2a8;
      font-weight: bold;
    }
    .option.wrong {
      background: #ffecec;
      border-color: #ff9a9a;
      font-weight: bold;
    }
    
    /* Quiz Controls and Progress */
    .bottom {
      display: flex;
      gap: 8px;
      margin-top: 14px;
      align-items: center;
      justify-content: space-between;
      border-top: 1px solid #eee;
      padding-top: 14px;
    }
    .progress { flex: 1; height: 10px; background: #f0f3f6; border-radius: 8px; overflow: hidden; }
    .progress > i { display: block; height: 100%; background: var(--yellow); width: 0%; transition: width 0.3s ease-out; }
    .small { padding: 8px 10px; border-radius: 6px; border: 0; background: #f3f6fb; color: #083243; font-weight: 600; cursor: pointer; }
    #nextBtn { background: var(--blue); color: white; }

    /* Footer Tabs */
    .footer-tabs {
      position: fixed;
      bottom: 0;
      width: 100%;
      max-width: 420px;
      display: flex;
      height: 60px;
      background: var(--card);
      border-top: 1px solid #e6eef8;
      z-index: 10;
    }
    .tab {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: var(--muted);
      cursor: pointer;
    }
    .tab.active {
      background: var(--yellow);
      color: #083243;
      font-weight: 700;
    }
    .tab:first-child i::before { content: '๐ฑ'; }
    .tab:last-child i::before { content: 'โ'; }

  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="back" onclick="showLessons()">โ</div>
      <h1 class="header-title" id="mainTitle">ุงูุฏุฑูุณ</h1>
    </header>
    
    <section class="lesson-list" id="lessonListView">
      <p style="color:var(--muted); font-size:14px; margin-top:0;">ุงุฎุชุฑ ุฏุฑุณูุง ูู ููุฑุฑุงุช ุงููุตู ุงูุฃูู ููุตู ุงูุซุงูู</p>
      </section>

    <section class="lesson-detail" id="lessonDetailView">
      <div class="card lesson-card">
        <div class="whiteboard">
          <div class="lesson-title" id="lessonName"></div>
          
          <div class="lesson-section-board">ุดุฑุญ ูุฎุชุตุฑ.</div>
          <p class="board-text" id="lessonSummary"></p>
          
          <div class="lesson-section-board">ูุซุงู ูุญููู.</div>
          <div class="board-text example-text" id="lessonExample"></div>
          
          <div class="lesson-section-board">ุฌุฑูุจ ุจููุณู.</div>
          <div class="board-text example-text" id="lessonPractice"></div>
        </div>

        <button class="start-btn" id="startBtn">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>

        <div class="quiz-wrap" id="quizWrap" style="display:none">
          <div class="card" id="qcard">
            <div style="font-size:12px;color:var(--muted);margin-bottom:6px">
              ุงูุณุคุงู <span id="qnum">1</span> ูู <span id="qtotal">5</span>
            </div>

            <div class="question" id="questionText"></div>
            <div class="options" id="options"></div>

            <div class="bottom">
              <div style="width:70px;text-align:center">ุงููุชูุฌุฉ: <strong id="score">0</strong></div>
              <div class="progress"><i id="progBar"></i></div>
              <div class="controls">
                <button class="small" id="nextBtn">ุงูุชุงูู</button>
                <button class="small" id="resetBtn">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="lesson-detail" id="assistantView" style="padding-top: 16px;">
        <div class="card">
            <h2 style="font-size:20px; font-weight:bold; margin-top:0; color:var(--blue);">ุงููุณุงุนุฏ ุงูุฐูู ููุฑูุงุถูุงุช</h2>
            <p style="font-size:14px; color:#555;">ุงูุชุจ ุณุคุงูู ูู ุงูุฑูุงุถูุงุช ููุง ูุณูุฌูุจู ุงููุธุงู ุงูุฐูู ููุฑูุง!</p>
            <div style="display:flex; gap:10px; margin-top:15px;">
                <input type="text" placeholder="...ุฃุฏุฎู ุณุคุงูู" style="flex:1; padding:12px; border-radius:8px; border:1px solid #e6eef8; font-size:16px;" />
                <button style="padding:12px 20px; border-radius:8px; border:0; background:var(--blue); color:#fff; font-weight:bold; cursor:pointer;">ุฅุฑุณุงู</button>
            </div>
            <p style="margin-top:20px; text-align:center; color:var(--blue); font-weight:600; font-size:14px;">ููุง ุณุชุธูุฑ ุฅุฌุงุจุฉ ุงููุณุงุนุฏ ุงูุฐูู ุฃู ุงูุดุฑุญ ุงููุฎุชุตุฑ ุจุนุฏ ุฅุฑุณุงู ุงูุณุคุงู.</p>
        </div>
    </section>

    <div class="footer-tabs">
      <div class="tab active" data-target="lessonListView" id="lessonsTab">
        <i></i>
        <span>ุงูุฏุฑูุณ</span>
      </div>
      <div class="tab" data-target="assistantView" id="assistantTab">
        <i></i>
        <span>ุงููุณุงุนุฏ ุงูุฐูู</span>
      </div>
    </div>
  </div>

  <script>
    // --- Lesson Data Bank ---
    const LESSONS = [
      {
        id: 'roots',
        name: 'ุงูุฌุฐูุฑ ุงูุชุฑุจูุนูุฉ',
        summary: 'ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ููุนุฏุฏ ุงูููุฌุจ ูู ุนุฏุฏ ุบูุฑ ุณุงูุจุ ุนูุฏ ุถุฑุจู ุจููุณู ูุนุทู ุงูุนุฏุฏ ุงูุฃุตูู. ููู ุนูููุฉ ุนูุณูุฉ ููุชุฑุจูุน.',
        example: '$\\sqrt{25} = 5$ ูุฃู $5 \\times 5 = 25$.\n$\\sqrt{16} = 4$ ูุฃู $4 \\times 4 = 16$.',
        practice: 'ุฌุฐุฑ 81 ูุณุงููุ',
        quiz: [
          { q: 'ูู ูุณุงูู ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู 16ุ', choices: ['2', '3', '4', '5'], answer: 2 },
          { q: 'ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฌุฐุฑู ุงูุชุฑุจูุนู ูุณุงูู 8ุ', choices: ['16', '64', '32', '8'], answer: 1 },
          { q: 'ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู 100 ููุ', choices: ['50', '25', '10', '5'], answer: 2 },
          { q: 'ุงุญุณุจ $\\sqrt{4}$ุ', choices: ['1', '2', '4', '16'], answer: 1 },
        ]
      },
      {
        id: 'irrational',
        name: 'ุฌุฐูุฑ ุตูุงุก',
        summary: 'ูู ุงูุฌุฐูุฑ ุงูุชู ูุง ูููู ุงูุชุนุจูุฑ ุนููุง ููุณุฑ (ุนุฏุฏ ูุณุจู)ุ ุฃู ุชููู ุฃุนุฏุงุฏูุง ุบูุฑ ููุชููุฉ ูุบูุฑ ุฏูุฑูุฉ.',
        example: 'ุงูุนุฏุฏ $\\sqrt{2}$ ูู ุฌุฐุฑ ุฃุตูุ ููููุชู ุงูุชูุฑูุจูุฉ ูู 1.4142...ุ ููุง ูููู ูุชุงุจุชู ููุณุฑ.',
        practice: 'ูู $\\sqrt{9}$ ุฌุฐุฑ ุฃุตูุ ูููุงุฐุงุ',
        quiz: [
          { q: 'ุฃู ูู ุงูุฃุนุฏุงุฏ ุงูุชุงููุฉ ูู ุฌุฐุฑ ุฃุตูุ', choices: ['$\\sqrt{4}$', '$\\sqrt{9}$', '$\\sqrt{3}$', '$\\sqrt{16}$'], answer: 2 },
          { q: 'ุงูุฌุฐุฑ ุงูุฃุตู ูู ุนุฏุฏ:', choices: ['ุฏูุฑู', 'ููุชูู', 'ุบูุฑ ูุณุจู', 'ูุณุจู'], answer: 2 },
        ]
      },
      { 
        id: 'pythagoras', 
        name: 'ูุธุฑูุฉ ููุซุงุบูุฑุณ', 
        summary: 'ูู ุงููุซูุซ ุงููุงุฆู ุงูุฒุงููุฉุ ูุฑุจุน ุทูู ุงููุชุฑ ูุณุงูู ูุฌููุน ูุฑุจุนู ุทููู ุงูุถูุนูู ุงูุขุฎุฑูู. ุงููุงููู ูู: $a^2 + b^2 = c^2$.', 
        example: 'ูุซูุซ ูุงุฆู ุทูู ุถูุนูู ุงููุงุฆููู 3 ู 4. ุทูู ุงููุชุฑ $c$ ูู:\\n$c^2 = 3^2 + 4^2$\n$c^2 = 9 + 16 = 25$\n$c = \\sqrt{25} = 5$.', 
        practice: 'ูุซูุซ ูุงุฆู ุทูู ุฃุญุฏ ุถูุนูู 5 ููุชุฑู 13. ูู ุทูู ุงูุถูุน ุงูุขุฎุฑุ', 
        quiz: [{ q: 'ุงูุถูุน ุงูุฃุทูู ูู ุงููุซูุซ ุงููุงุฆู ูุณููุ', choices: ['ูุชุฑ', 'ูุงุนุฏุฉ', 'ุงุฑุชูุงุน', 'ุถูุน'], answer: 0 }] 
      },
      { id: 'real', name: 'ุงูุฃุนุฏุงุฏ ุงูุญููููุฉ', summary: 'ูู ูุฌููุนุฉ ุชุถู ุฌููุน ุงูุฃุนุฏุงุฏ ุงููุณุจูุฉ (ุงููุณูุฑุ ูุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ) ูุงูุฃุนุฏุงุฏ ุบูุฑ ุงููุณุจูุฉ (ุงูุฌุฐูุฑ ุงูุตูุงุก).', example: 'ุชุดูู: $-3$, $0.5$, $\\sqrt{2}$, $\\frac{1}{3}$.', practice: 'ุตููู ุงูุนุฏุฏ 7 ุฅูู ูุณุจู ุฃู ุบูุฑ ูุณุจู.', quiz: [{ q: 'ุฃู ูู ุงูุฃุนุฏุงุฏ ุงูุชุงููุฉ ููุณ ุญูููููุงุ', choices: ['$\\sqrt{4}$', '$-1$', '$\\sqrt{-1}$', '$\\pi$'], answer: 2 }] },
      { 
        id: 'exp_roots', 
        name: 'ุงูุฃุณุณ ุงููุณุจูุฉ ูุงูุฌุฐูุฑ', 
        summary: 'ุงูุฃุณ ุงููุณุจู ูู ุทุฑููุฉ ุฃุฎุฑู ููุชุงุจุฉ ุงูุฌุฐูุฑ: $x^{m/n} = \\sqrt[n]{x^m}$. ูุงููู ููุฉ ุงูููุฉ ูู $\\left(A^n\\right)^m = A^{n \\times m}$.', 
        example: 'ูุฅูุฌุงุฏ ูููุฉ $\\left(2^3\\right)^4$: ูุถุฑุจ ุงูุฃุณุณ $3 \\times 4 = 12$. \nูุชููู $2^{12} = 4096$.', 
        practice: 'ุงูุชุจ $5^{3/2}$ ุจุตูุบุฉ ุฌุฐุฑ.', 
        quiz: [{ q: 'ูุงุฐุง ุชุนูู $x^{1/2}$ุ', choices: ['ุถุนู x', 'ูุตู x', 'ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู x', 'ูุฑุจุน x'], answer: 2 }] 
      },
      { 
        id: 'exp_mult_div', 
        name: 'ุถุฑุจ ุงูุฃุณุณ ุงููุณุจูุฉ ููุณูุชูุง', 
        summary: 'ูุงุนุฏุฉ ุงูุถุฑุจ: ุนูุฏ ุถุฑุจ ููู ููุง ููุณ ุงูุฃุณุงุณุ ูุฌูุน ุงูุฃุณุณ ($A^n \\cdot A^m = A^{n+m}$). \\nูุงุนุฏุฉ ุงููุณูุฉ: ุนูุฏ ุงููุณูุฉุ ูุทุฑุญ ุงูุฃุณุณ ($\\frac{A^n}{A^m} = A^{n-m}$).', 
        example: 'ูุซุงู ุงููุณูุฉ (ูู ุตูุฑู): $\\frac{7^6}{7^3} = 7^{6-3} = 7^3 = 343$.\nูุซุงู ุงูุถุฑุจ: $5^2 \\cdot 5^4 = 5^{2+4} = 5^6 = 15625$.', 
        practice: 'ุงุญุณุจ $\\frac{3^5}{3^2}$ ูุถุนูุง ูู ุตูุฑุฉ ุฃุณ ูุงุญุฏ.', 
        quiz: [
            { q: '$5^{1/3} \\cdot 5^{2/3}$ ูุณุงููุ', choices: ['5', '25', '1', '1/5'], answer: 0 },
            { q: 'ูุงุชุฌ $\\frac{2^8}{2^3}$ ููุ', choices: ['2$^{11}$', '2$^{5}$', '2$^{8/3}$', '2$^3$'], answer: 1 },
        ] 
      },
      { id: 'scientific', name: 'ุงูุตูุบุฉ ุงูุนูููุฉ', summary: 'ูุชุงุจุฉ ุงูุฃุนุฏุงุฏ ุงููุจูุฑุฉ ุฌุฏูุง ุฃู ุงูุตุบูุฑุฉ ุฌุฏูุง ุนูู ุดูู $a \\times 10^n$ ุญูุซ $1 \\le |a| < 10$ ู $n$ ุนุฏุฏ ุตุญูุญ.', example: 'ุงูุนุฏุฏ 300,000 ููุชุจ: $3 \\times 10^5$.', practice: 'ุงูุชุจ 0.0000075 ุจุงูุตูุบุฉ ุงูุนูููุฉ.', quiz: [{ q: 'ุงูุตูุบุฉ ุงูุนูููุฉ ููุนุฏุฏ 45000 ููุ', choices: ['4.5 $\\times$ 10$^{4}$', '45 $\\times$ 10$^{3}$', '0.45 $\\times$ 10$^{5}$', '450 $\\times$ 10$^{2}$'], answer: 0 }] },
      { id: 'percentage', name: 'ุงููุณุจุฉ ุงููุฆููุฉ', summary: 'ุทุฑููุฉ ููุชุนุจูุฑ ุนู ุนุฏุฏ ููุณุฑ ูู 100ุ ููุฑูุฒ ููุง ุจุงูุฑูุฒ (%).', example: '$25\\%$ ุชุนูู 25 ูู 100ุ ุฃู $\\frac{1}{4}$.', practice: 'ูู ุชุณุงูู $15\\%$ ูู 200ุ', quiz: [{ q: 'ูุง ูู ุงููุณุฑ ุงูุนุงุฏู ุงูุฐู ููุซู $20\\%$ุ', choices: ['$\\frac{1}{5}$', '$\\frac{1}{20}$', '$\\frac{2}{5}$', '$\\frac{1}{4}$'], answer: 0 }] }
    ];

    // --- DOM Elements ---
    const lessonListView = document.getElementById('lessonListView');
    const lessonDetailView = document.getElementById('lessonDetailView');
    const assistantView = document.getElementById('assistantView');
    const mainTitle = document.getElementById('mainTitle');
    const backBtn = document.querySelector('.back');
    const tabs = document.querySelectorAll('.tab');
    
    // Lesson Detail Elements
    const lessonNameEl = document.getElementById('lessonName');
    const lessonSummaryEl = document.getElementById('lessonSummary');
    const lessonExampleEl = document.getElementById('lessonExample');
    const lessonPracticeEl = document.getElementById('lessonPractice');
    const startBtn = document.getElementById('startBtn');
    
    // Quiz Elements
    const quizWrap = document.getElementById('quizWrap');
    const qnum = document.getElementById('qnum');
    const qtotal = document.getElementById('qtotal');
    const questionText = document.getElementById('questionText');
    const optionsEl = document.getElementById('options');
    const scoreEl = document.getElementById('score');
    const progBar = document.getElementById('progBar');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');

    let currentLesson = null;
    let quizState = { idx: 0, score: 0, order: [], answered: false };

    // --- Utility Functions ---
    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // --- View/Navigation Functions ---
    function setActiveTab(targetId) {
        // Hide all main views
        lessonListView.style.display = 'none';
        lessonDetailView.style.display = 'none';
        assistantView.style.display = 'none';

        // Show the target view
        document.getElementById(targetId).style.display = 'flex';
        
        // Handle header and back button
        const isLessonDetail = targetId === 'lessonDetailView';
        const isAssistant = targetId === 'assistantView';
        
        backBtn.style.display = isLessonDetail ? 'block' : 'none';
        if (isLessonDetail) {
            mainTitle.textContent = currentLesson ? 'ุงุฎุชุจุงุฑ ุงูุฏุฑุณ' : 'ุงูุฏุฑุณ'; // Updated title for detail view
        } else if (isAssistant) {
            mainTitle.textContent = 'ุงููุณุงุนุฏ ุงูุฐูู';
        } else {
            mainTitle.textContent = 'ุงูุฏุฑูุณ';
        }

        // Handle tab active state
        tabs.forEach(t => t.classList.remove('active'));
        document.querySelector(`.tab[data-target="${targetId}"]`).classList.add('active');
    }

    function showLessons() {
        currentLesson = null;
        quizWrap.style.display = 'none'; 
        startBtn.style.display = 'block'; 
        setActiveTab('lessonListView');
    }

    function showLessonDetail(lessonId) {
        currentLesson = LESSONS.find(l => l.id === lessonId);
        if (!currentLesson) return;

        // Populate lesson info
        lessonNameEl.textContent = currentLesson.name;
        // Use innerHTML for math expressions and replace newline characters with <br> for better board look
        lessonSummaryEl.innerHTML = currentLesson.summary.replace(/\n/g, '<br>');
        lessonExampleEl.innerHTML = currentLesson.example.replace(/\n/g, '<br>');
        lessonPracticeEl.innerHTML = currentLesson.practice.replace(/\n/g, '<br>');
        
        // Switch view
        setActiveTab('lessonDetailView');
    }

    // --- Quiz Functions ---
    function prepareQuiz(lesson) {
      if (!lesson || !lesson.quiz) return;
      
      let pool = lesson.quiz.slice();
      shuffle(pool); 
      quizState.order = pool.slice(0, 5); 
      quizState.idx = 0;
      quizState.score = 0;
      quizState.answered = false;
      
      qtotal.textContent = quizState.order.length;
      scoreEl.textContent = quizState.score;
      quizWrap.style.display = 'block';
      startBtn.style.display = 'none';
      renderQuiz();
    }

    function renderQuiz() {
      const item = quizState.order[quizState.idx];
      qnum.textContent = quizState.idx + 1;
      questionText.innerHTML = item.q; 
      optionsEl.innerHTML = "";

      item.choices.forEach((c, i) => {
        const b = document.createElement("div");
        b.className = "option";
        b.innerHTML = c;
        b.onclick = () => selectOption(i);
        optionsEl.appendChild(b);
      });

      // Update progress bar
      progBar.style.width = ((quizState.idx) / quizState.order.length) * 100 + "%";
      nextBtn.disabled = !quizState.answered;
    }

    function selectOption(i) {
      if (quizState.answered) return;
      quizState.answered = true;

      const correct = quizState.order[quizState.idx].answer;
      const opts = document.querySelectorAll("#options .option");

      // Mark selected option
      opts[i].classList.add("selected");
      
      // Highlight correct/wrong
      opts[i].classList.add(i === correct ? "correct" : "wrong");
      if (i !== correct) {
        opts[correct].classList.add("correct");
      }

      if (i === correct) quizState.score++;
      scoreEl.textContent = quizState.score;
      nextBtn.disabled = false;
    }

    // --- Event Listeners ---
    function initLessonList() {
      lessonListView.innerHTML = LESSONS.map(l => 
        `<div class="lesson-item" data-id="${l.id}">${l.name}</div>`
      ).join('');

      document.querySelectorAll('.lesson-item').forEach(item => {
        item.onclick = () => showLessonDetail(item.getAttribute('data-id'));
      });
    }

    startBtn.onclick = () => {
        if(currentLesson) {
            prepareQuiz(currentLesson);
        }
    };
    
    nextBtn.onclick = () => {
      if (quizState.answered && quizState.idx < quizState.order.length - 1) {
        quizState.idx++;
        quizState.answered = false;
        renderQuiz();
      } else if (quizState.answered && quizState.idx === quizState.order.length - 1) {
        alert(`ุงูุชูู ุงูุงุฎุชุจุงุฑ! ูุชูุฌุชู ูู: ${quizState.score} ูู ${quizState.order.length}`);
        quizWrap.style.display = 'none';
        startBtn.style.display = 'block';
        progBar.style.width = '100%';
      }
    };
    
    resetBtn.onclick = () => {
      if (currentLesson) {
        prepareQuiz(currentLesson);
      }
    };

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = tab.getAttribute('data-target');
            setActiveTab(target);
        });
    });

    // --- Initialization ---
    initLessonList();
    showLessons(); 
  </script>

</body>
</html>


<div class="app">
    </div>

  <script>
    // ุฌููุน ุฃููุงุฏ JavaScript ุงูุฎุงุตุฉ ุจุงูุฏุฑูุณ ูุงููุธุงุฆู ููุง!
    const LESSONS = [
      // ...
    ];
    // ...
  </script>

</body>
</html>


<meta name="viewport" content="width=device-width,initial-scale=1" />
